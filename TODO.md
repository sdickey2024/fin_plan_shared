# fin_plan â€” Project TODO

_Last updated: autogenerated by ChatGPT._

## ğŸ§© Core Simulation & Data
- [ ] **Fix Data Load, Wrong Age, Wrong Key When Saving File"
- [ ] **Tighten save path**
  - Ensure all editors validate and re-serialize to proper JSON types before saving (no Python-style dicts).
  - Optionally create a `.bak` before overwrite.
  - Add schema validation summary (show missing or mismatched types inline).
- [ ] Add event-level validation
  - Warn if `life_event.date` is before current simulation start.
  - Verify numeric fields (returns, variance, inflation, tax rates) are within sane bounds.
- [ ] Add automatic re-normalization after edits
  - When a scenario or user file is saved, re-run normalization (via your existing `normalize.py`).

## ğŸ–¥ï¸ GUI & Editing Experience
- [ ] Expand/collapse nested sections (â€œaccordionâ€ for objects) to reduce scrolling.
- [ ] Add toolbar icons (Open, Save, Run, Add Event).
- [ ] Auto-expand nested `portfolio.breakdown` and `expenses.breakdown` for easier viewing.
- [ ] Add â€œSearch fieldâ€ to quickly locate any key name or value.
- [ ] Add keyboard shortcuts:
  - `Ctrl+S` â†’ Save
  - `Ctrl+O` â†’ Open
  - `Ctrl+R` â†’ Run simulation
- [ ] Improve layout consistency (unify spacing/padding in nested frames).
- [ ] Add dark/light theme toggle (Tk themed styles).

## ğŸ“Š Simulation & Output
- [ ] Integrate run-time progress bar / status indicator during Monte Carlo runs.
- [ ] Allow run cancellation from GUI.
- [ ] Add â€œCompare Scenariosâ€ view: overlay multiple simulation outputs.
- [ ] Add tabbed graph view (e.g., portfolio, withdrawals, success probability).
- [ ] Allow quick run from context menu in scenario list (right-click â†’ Run).

## ğŸ§  Data Management
- [ ] Auto-detect user vs scenario JSON (open in correct editor automatically).
- [ ] Add â€œNew Base Userâ€ template generator.
- [ ] Add JSON export/backup manager.
- [ ] Add recent files list (last 5 user/scenario files).

## âš™ï¸ Maintenance / Code Quality
- [ ] Refactor editor classes into a `gui/` package (`json_editor.py`, `schema_definitions.py`, etc.).
- [ ] Split `json_form_editor.py` into smaller files (Core widgets, KeyValueTable, ArrayEditor, etc.).
- [ ] Add unit tests for JSON load/save/validation.
- [ ] Migrate hard-coded schemas to separate JSON schema files under `schemas/`.
